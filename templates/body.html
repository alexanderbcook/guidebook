
<div class="row rows-cols-auto" id="recommendation-grid">
 {% for r in recommendations %} 
 <div class="col">
    <!-- Card -->
    <button class="card" data-bs-toggle="modal" data-bs-target="#{{r.id}}">
      <div class="card-body">
        <h5 class="card-title">{{r.fields.Name}}</h5>
        <p class="card-text" id="desktop-text">        
          {% if r.fields.Description|length < 150 %}
          {{ r.fields.Description }}
          {% else %}
          {{ r.fields.Description|truncate(150, False, '...')}}
          {% endif %}
        </p>
        <p class="card-text" id="mobile-text">        
          {% if r.fields.Description|length < 35 %}
          {{ r.fields.Description }}
          {% else %}
          {{ r.fields.Description|truncate(35, False, '...')}}
          {% endif %}
        </p>
        <hr/>
        {% if 'Tags' in r.fields %}
        <p>
          <i>{% for t in r.fields.Tags %}
              {{t.lower() | trim}}&nbsp
            {% endfor %}
          </i>
        </p>
        {% endif %}
      </div>
    </button>
    <!-- Modal -->
    <div class="modal fade" id="{{r.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content rounded-4">
          <div class="modal-body">
            <button type="button" class="btn-close float-end" data-bs-dismiss="modal" aria-label="Close"></button>
            {% if 'PhotoLink' in r.fields %}
            <br>
            <hr>
            <figure>
              <img
                class="img-fluid"
                cross-origin
                src="{{ r.fields.PhotoLink }}"
              />
              <figcaption><i>PC: {{r.fields.PhotoCredit}}</i></figcaption>
            </figure>
            {% endif %}
            <h3 class="card-title">{{r.fields.Name}}</h3>
            {% if 'Neighborhood' in r.fields%}
            <p class="card-text">{{r.fields.Neighborhood[0] | trim}}</p>
            {% endif %}
            <p class="card-text">{{r.fields.Description | trim}}</p>
            {% if 'Address' in r.fields %}
            <a class="card-text" target="_blank" rel="noopener noreferrer" href="{{r.fields.MapLink}}">{{r.fields.Address | trim}}{% if 'Cities' in r.fields%}{{', '+r.fields.Cities[0] | trim}}{% endif %}</a>
            {% endif %}          
          </div>
        </div>
      </div>
    </div>
  </div>
 {% endfor %}
</div>
<style>

#mobile-text{
  display:none;
  visibility:hidden;
}
@media only screen and (max-width: 900px) {
  .card{
    width:10rem;
  }
  #desktop-text { display: none !important; }
  #mobile-text  { display: block; visibility: visible; }
}

/* Small devices (portrait tablets and large phones, 600px and up) */
@media only screen and (min-width: 600px) {  
  .card{
    width:10rem;
  }
}

/* Medium devices (landscape tablets, 768px and up) */
@media only screen and (min-width: 768px) {
  .card{
    width:10rem;
  }
}

/* Large devices (laptops/desktops, 992px and up) */
@media only screen and (min-width: 992px) {
  .card{
    width:16rem;
    height:100%;
  }
}

/* Extra large devices (large laptops and desktops, 1200px and up) */
@media only screen and (min-width: 1200px) {
  .card{
    width:16rem;
    height:100%;
  }
} 
</style>
